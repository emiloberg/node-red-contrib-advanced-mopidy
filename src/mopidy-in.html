<script type="text/x-red" data-template-name="mopidy-in">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-globe"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
    <label for="node-input-messagetype"><i class="fa fa-list"></i> Listen to</label>
        <select type="text" id="node-input-messagetype">
            <option value="event">Mopidy event changes</option>
            <option value="websocket">WebSocket changes</option>
            <option value="state">State changes</option>
            <option value="reconnect">Reconnect changes</option>
            <option value="all">All changes</option>
        </select>
    </div>
    <div class="form-tips">
        <ul>
            <li><b>Mopidy:</b> <i>(Default)</i> Everything which has to do with the music. E.g. play started, ended, stream title changed, volume changed, etc.</li>
            <li><b>Websocket:</b> Peek into the WebSocket traffic between Node-RED and the Mopidy server.</li>
            <li><b>State:</b> The state of a Mopidy server changes, eg a server goes offline/online.</li>
            <li><b>Reconnect:</b> Events sent when Node-RED is trying to connect to a Mopidy server.</li>
            <li><b>All:</b> All of the above.</li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="mopidy-in">
    <p>Some help here</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('mopidy-in',{
        category: 'advanced-input',
        color:'#C6E8C0',
        defaults: {
            name: {value:''},
            messagetype: {value:'event'},
            server: {
                value: '',
                type: 'mopidy-config',
                required: true
            }
        },
        inputs:0,
        outputs:1,
        icon: 'mopidy-icon.png',
        label: function() { return this.name || 'mopidy events'; },
        labelStyle: function() { return this.name?'node_label_italic':''; }
    });
</script>
